{% extends 'layouts/app.html' %}
{% load static %}

{% block title %}
    {{ session.nom }} - Cheminants
{% endblock %}

{% block content %}
<section class="content-header mb-5">
  <h1 class="f-bold">
    Vue 360°
  </h1>
  <ol class="breadcrumb">
    <a href="{% url 'sessions' %}" class="btn btn-info"><i class="fa fa-reply"></i> Retour</a>
  </ol>
</section>

<section class="content">
  {% include 'partials/suivi_chiffre_session.html' %}
  <div class="row">
    <div class="col-md-3">
      {% include 'partials/detail_session.html' %}
      <div class="box box-primary">
        <div class="box-body">
          <div class="box_button">
            {% include 'partials/sous_menu_session.html' %}
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-9">
      <div class="box box-success">
        <div class="box-body">
          <div class="row">
            <div class="col-md-12">
             <div class="box_button">
              <span class="btn btn-info centre_influence_degrade mb-3" data-toggle="modal" data-target="#modal-add_cheminant"><i class="fa fa-user-circle"></i> Créer un cheminant</span>
              <span class="btn btn-info centre_influence_degrade mb-3" data-toggle="modal" data-target="#modal-add_certificat"><i class="fa fa-graduation-cap"></i> Générer un certificat</span>
              <span class="btn btn-info centre_influence_degrade mb-3" data-toggle="modal" data-target="#modal-add_cours"><i class="fa fa-hourglass-2"></i> Créer un cours</span>
              <span class="btn btn-info centre_influence_degrade mb-3" data-toggle="modal" data-target="#modal-add_question_reponse"><i class="fa fa-comments-o"></i> Créer des QCM</span>
              <span class="btn btn-warning mb-3" data-toggle="modal" data-target="#modal-extraction_cheminants"><i class="fa fa-database"></i> Extraire des cheminants</span>
             </div>
            </div>
          <div class="col-md-12 table-responsive">
            <br>
            <div class="table-responsive">
                <table id="cheminant_sessions_datatables" class="table table-bordered table-striped">
                  <thead>
                    <tr>
                      <th class="d-none"></th>
                      <th>#</th>
                      <th>Numero</th>
                      <th>Nom & Prénoms</th>
                      <th>Tribu</th>
                      <th>Département</th>
                      <th>Date inscription</th>
                      <th>Statut</th>
                      <th class="text-center button_action">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for cheminant in cheminant_session %}
                        <tr>
                          <td class="d-none"></td>
                          <td>
                              {% if cheminant.photo %}
                                  <img src="{{cheminant.photo.url|default_if_none:''}}" class="img-circle" width="35" alt="{{ cheminant.nom|default_if_none:'' }} {{ cheminant.prenoms|default_if_none:'' }}">
                              {% else %}
                                  <img src="{% static 'dist/img/avatar.png' %}" class="img-circle" width="35" alt="">
                              {% endif %}
                          </td>
                          <td>{{ cheminant.numero_utilisateur|default_if_none:'' }}</td>
                          <td>{{ cheminant.nom|default_if_none:'' }} {{ cheminant.prenoms|default_if_none:'' }}</td>
                          <td>{{ cheminant.tribu.libelle|default_if_none:'' }}</td>
                          <td>{{ cheminant.departement.libelle|default_if_none:'' }}</td>
                          <td>{{ cheminant.date_joined|date:'d/m/Y' }}</td>
                          <td><span class="badge badge-{{ cheminant.statut_compte|lower|slugify }}">{{ cheminant.statut_compte }}</span></td>
                          <td class="text-center">
                            <a href="{% url 'detail_session_cheminant' cheminant.id %}" class="btn btn-info btn-xs"><i class="fa fa-eye"></i></a>
                            <span class="btn_modifier_cheminant btn btn-warning btn-xs" data-cheminant_id="{{cheminant.id}}" data-model_name="cheminant" data-modal_title="Modifier le cheminant" data-href="{% url 'update_session_cheminants' cheminant.id %}"><i class="fa fa-edit"></i></span>
                            <span class="btn_supprimer_cheminant btn btn-danger btn-xs" data-cheminant_id="{{cheminant.id}}"><i class="fa fa-trash"></i></span>
                          </td>
                        </tr>
                    {% endfor %}
                  </tbody>
                </table>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% include 'partials/detail_session_modal.html' %}
{% include 'partials/add_cheminant_modal.html' %}
{% include 'partials/add_certificat_modal.html' %}
{% include 'partials/add_cours_modal.html' %}
{% include 'partials/add_question_reponse_modal.html' %}
{% endblock %}